


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             text, CODE, READONLY
    2 00000000                 EXPORT           asm_math
    3 00000000         
    4 00000000         ; function asm_math
    5 00000000         ; inputs:
    6 00000000         ; -------
    7 00000000         ; R0: input
    8 00000000         
    9 00000000         
   10 00000000         asm_math
   11 00000000 F04F 4380       MOV              R3, #0x40000000
   12 00000004 EBA3 0303       SUB              R3, R3, R3  ;SETTING INDEX TO 0
                                                            
   13 00000008 EEB0 0A00       VMOV.F32         S0, #0x40000000 ;INITIALIZING M
                                                            INIMUM VALUE (TO FI
                                                            X)
   14 0000000C EEF7 0A00       VMOV.F32         S1, #0x3f800000 ;INITIALIZING M
                                                            AXIMUM VALUE (TO FI
                                                            X)
   15 00000010 EE02 2A10       VMOV.F32         S4, R2      ;SETTING S4 TO LENG
                                                            TH - SHOULD BE ABLE
                                                             TO DELETE
   16 00000014 461B            MOV              R3, R3      ;SETTING R3 TO INDE
                                                            X
   17 00000016         
   18 00000016         line12
   19 00000016         ;checks iterator and you have a branch here
   20 00000016 4293            CMP              R3, R2      ;COMPARE INDEX WITH
                                                             LENGTH - TERMINATI
                                                            ON CONDITION
   21 00000018 DA31            BGE              rms         ;COMPUTING RMS VALU
                                                            E
   22 0000001A EC90 1A01       VLDM             R0, {S2}    ;LOADING INPUT INTO
                                                             CURRENT VAL
   23 0000001E EEB4 1A40       VCMP.F32         S2, S0      ;COMPARING CURRENT 
                                                            VAL WITH MINIMUM VA
                                                            LUE
   24 00000022 DD04            BLE              minimum
   25 00000024         ;BLE S2, S0, minimum
   26 00000024 EEB4 1A60       VCMP.F32         S2, S1      ;COMPARING CURRENT 
                                                            VAL WITH MAX VAL
   27 00000028 DA11            BGE              maximum
   28 0000002A         ;BGE S2, S1, maximum
   29 0000002A F000 F820       BL               rip
   30 0000002E         ;jmp rip
   31 0000002E         
   32 0000002E         minimum
   33 0000002E EEB0 0A41       VMOV.F32         S0, S2      ;REPLACING THE MIN 
                                                            VAL WITH THE CURREN
                                                            T VAL
   34 00000032 F101 4400       ADD              R4, R1, #0x80000000 ;CHECK LATE
                                                            R ITERATE BY 8
   35 00000036 F100 4080       ADD              R0, R0, #0x40000000 ;CHECK VALU
                                                            E LATER ITERATE ADD
                                                            RESS OF INPUT - ITE
                                                            RATE BY 4 
   36 0000003A EE02 3A90       VMOV.F32         S5, R3
   37 0000003E EDC4 2A00       VSTR.F32         S5, [R4]    ;STORE INDEX IN OUT
                                                            PUT VALUE



ARM Macro Assembler    Page 2 


   38 00000042 EE41 1A01       VMLA.F32         S3,S2,S2    ;SQUARE VALUE AND A
                                                            DD IT TO S3 (RMS VA
                                                            LUE)
   39 00000046 F103 0301       ADD              R3,R3,#1    ;ITERATE INDEX
   40 0000004A F7FF FFE4       BL               line12
   41 0000004E         
   42 0000004E         maximum
   43 0000004E EEF0 0A41       VMOV.F32         S1, S2      ;REPLACING THE MAX 
                                                            VALUE WITH THE CURR
                                                            ENT VAL
   44 00000052 F101 040C       ADD              R4, R1, #12 ;PLACING OUTPUT IN 
                                                            
   45 00000056 EE02 3A90       VMOV.F32         S5, R3
   46 0000005A EDC4 2A00       VSTR.F32         S5, [R4]    ; STORE INDEX IN OU
                                                            TPUT INDEX VALUE 
   47 0000005E F100 0004       ADD              R0, R0, #4  ;ITERATE ADDRESS OF
                                                             INPUT
   48 00000062 EE41 1A01       VMLA.F32         S3,S2,S2    ;SQUARE THE VALUE A
                                                            ND ADD IT TO RMS VA
                                                            LUE
   49 00000066 F103 0301       ADD              R3,R3,#1    ;ITERATE INDEX
   50 0000006A F7FF FFD4       BL               line12
   51 0000006E         
   52 0000006E         rip
   53 0000006E EE41 1A01       VMLA.F32         S3,S2,S2    ;SQUARE THE VALUE A
                                                            ND ADD IT TO RMS VA
                                                            LUE
   54 00000072 F100 0004       ADD              R0, R0, #4  ;ITERATE INPUT ADDR
                                                            ESS
   55 00000076 F103 0301       ADD              R3,R3,#1    ;ITERATE INDEX
   56 0000007A F7FF FFCC       BL               line12
   57 0000007E         
   58 0000007E         rms
   59 0000007E EEC1 1A82       VDIV.F32         S3, S3, S4  ;DIVIDE RMS VALUE B
                                                            Y LENGTH
   60 00000082 EEF1 1AE1       VSQRT.F32        S3, S3      ;SQUAREROOT WHAT RE
                                                            MAINS
   61 00000086 F101 0410       ADD              R4, R1, #16 ;MOVE POINTER TO RM
                                                            S OUTPUT REGISTER
   62 0000008A EDC4 1A00       VSTR.F32         S3, [R4]    ;STORE RMS VALUE IN
                                                             APPROPRIATE REGIST
                                                            ER IN OUTPUT 
   63 0000008E F101 0400       ADD              R4, R1, #0  ;REGISTER OUTPUT OF
                                                             MINVAL
   64 00000092 ED84 0A00       VSTR.F32         S0, [R4]    ; STORING MINIMUM V
                                                            ALUE 
   65 00000096 F101 0404       ADD              R4, R1, #4  ;REGISTER OUTPUT OF
                                                             MAXVAL
   66 0000009A EDC4 0A00       VSTR.F32         S1, [R4]    ;STORING MAXVAL
   67 0000009E         
   68 0000009E         END
                       
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\assembly.d -o.\objects\assembly.o -IP:\ECSE426\LAB1\R
TE -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.2.0\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Ke
il\STM32F4xx_DFP\2.7.0\Drivers\CMSIS\Device\ST\STM32F4xx\Include -IC:\Keil_v5\A
RM\PACK\Keil\STM32F4xx_DFP\2.11.0\Drivers\CMSIS\Device\ST\STM32F4xx\Include --p
redefine="__UVISION_VERSION SETA 515" --predefine="_RTE_ SETA 1" --predefine="S
TM32F407xx SETA 1" --list=.\listings\assembly.lst Assembly.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

END 0000009E

Symbol: END
   Definitions
      At line 68 in file Assembly.s
   Uses
      None
Comment: END unused
asm_math 00000000

Symbol: asm_math
   Definitions
      At line 10 in file Assembly.s
   Uses
      At line 2 in file Assembly.s
Comment: asm_math used once
line12 00000016

Symbol: line12
   Definitions
      At line 18 in file Assembly.s
   Uses
      At line 40 in file Assembly.s
      At line 50 in file Assembly.s
      At line 56 in file Assembly.s

maximum 0000004E

Symbol: maximum
   Definitions
      At line 42 in file Assembly.s
   Uses
      At line 27 in file Assembly.s
Comment: maximum used once
minimum 0000002E

Symbol: minimum
   Definitions
      At line 32 in file Assembly.s
   Uses
      At line 24 in file Assembly.s
Comment: minimum used once
rip 0000006E

Symbol: rip
   Definitions
      At line 52 in file Assembly.s
   Uses
      At line 29 in file Assembly.s
Comment: rip used once
rms 0000007E

Symbol: rms
   Definitions
      At line 58 in file Assembly.s
   Uses
      At line 21 in file Assembly.s
Comment: rms used once
text 00000000



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: text
   Definitions
      At line 1 in file Assembly.s
   Uses
      None
Comment: text unused
8 symbols
342 symbols in table
